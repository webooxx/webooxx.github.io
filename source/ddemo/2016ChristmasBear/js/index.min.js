function compare(n){return function(t,e){var i=t[n],a=e[n];return i>a?-1:a>i?1:0}}var load=function(){function n(){i+=1,$("#rate").text((i/e*1e4/100>>0)+"%"),e>i?$('<img style="display:none">').attr("src",t.pop()).on("load",n):$("#loading").remove()}var t=["img/arrow-left.png","img/arrow-right.png","img/arrow.png","img/back-img.png","img/backtogame.png","img/bear.png","img/button-info.png","img/button-revert.png","img/button-test.png","img/deadline.png","img/help.png","img/icon.jpg","img/line.png","img/paper.png","img/qrcode-text.png","img/qrcode.png","img/rule.png","img/save.png","img/selected.png","img/testing.png","img/title-2x.png"],e=t.length,i=0;$("<img>").attr("src",t.pop()).on("load",n)};$("#rate").text("1%"),setTimeout(load,200),$(function(){var initColors=function(){var n=["e94441","e94966","f3a7d7","f3a7b3","f08643","f5c126","f4e5da","e1b390","e09d60","84563a","a0534d","000000","22522a","4b8237","79a32c","93d3e0","83c3f4","354b8b"],t=[];for(i=0;i<n.length;i++){var e=n[i];t.push('<div class="swiper-slide" ><a class="panel-init__colors__item" style="background-color:#'+e+'" data-color="'+e+'"></a></div>')}$(".panel-init__colors__wrap").html(t.join("")),$(".panel-init__colors__container").each(function(){$(this).width($(this).width()-$(this).width()%60)});var a=new Swiper(".swiper-container",{loop:!0,slidesPerGroup:6,slidesPerView:6});$(".panel-init__colors__arrow-left").on("click",function(n){n.preventDefault(),a.swipePrev()}),$(".panel-init__colors__arrow-right").on("click",function(n){n.preventDefault(),a.swipeNext()}),$(document).on("touchstart",".panel-init__colors__item",function(){$(".panel-init__colors__item").removeClass("panel-init__colors__item_status_selected"),$(this).addClass("panel-init__colors__item_status_selected")}),$(".panel-init__colors__item").eq(6).addClass("panel-init__colors__item_status_selected")},initPaperMargin=function(){var n=$(".panel-init-wrap").height(),t=$(".panel-init__header").height(),e=$(".panel-init__paper").height(),i=$(".panel-init__tools").height(),a=$(".panel-init__colors").height();$(".panel-init__paper").css("margin-top",(n-t-e-i-a)/2)},component=draw($(".panel-init__canvas"),$("#canvas-init")[0]),hashComponentColor=function(n,t){var e=[];for(i=0;i<n.length;i++)e.push(n[i].fillStyle);var a=0;for(e=e.join("").replace(/#FFFFFF/g,"").replace(/#/g,""),i=0;i<e.length;i++)a+=e.charCodeAt(i);return a%t};$(".panel-init__paper").on("touchstart",function(n){if($(n.target).hasClass("panel-init__colors__arrow-right")||$(n.target).hasClass("panel-init__button-test")||$(n.target).hasClass("panel-init__button-info"))return!0;if($(n.target).hasClass("panel-init__colors__item")){var t="#"+$(n.target).attr("data-color"),e=$('<div class="colorTip">').css("background-color",t);setTimeout(function(){$(".panel-init").append(e)},20),setTimeout(function(){$(e).remove()},1020)}var i=n.changedTouches[0].pageX,a=n.changedTouches[0].pageY,o=$('<div class="tapTip">').css("left",i+"px").css("top",a+"px");setTimeout(function(){$(".panel-init").append(o)},100),setTimeout(function(){$(o).remove()},1100)}),$(".panel-init").on("displayPanel",function(){$("body").css("overflow","hidden").css("background-image",""),$(".panel").hide(),$(this).show()}).on("init",function(){initColors(),initPaperMargin()}).on("touchend",function(n){var t={x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY},e=$(".panel-init__canvas").offset(),a=e.left,o=a+e.width,s=e.top,r=s+e.height,l=t.x>=a&&t.x<=o&&t.y>=s&&t.y<=r,c={x:t.x-a,y:t.y-s};if(l&&$(".panel-init__colors__item_status_selected").size()){var p=[];for(i=0;i<component.length;i++)component[i].data&&component[i].isTap(c)&&p.push(component[i]);if(p=p.length?p[0].logicalAnalysisComponent(p):[],p.length>0){var g=$(".panel-init__colors__item_status_selected").attr("data-color")||"FFFFFF";for(i=0;i<p.length;i++)p[i].changeColor("#"+g);p[0].callUpdate()}}}).triggerHandler("init"),$(".panel-init .help").on("touchend",function(n){return $(this).remove(),n.stopPropagation(),n.preventDefault(),!1}),$(".panel-test").on("displayPanel",function(){var i=hashComponentColor(component,10),canvas=$("<canvas>")[0],context=canvas.getContext("2d");canvas.width=context.width=750,canvas.height=context.height=1206;var bgImg=new Image;bgImg.src="img/bg-"+i+".jpg",$(bgImg).on("load",function(){context.drawImage(bgImg,0,0,750,1206,0,0,750,1206),context.drawImage($("#canvas-init")[0],0,0,468,694,154,318,468,694),$.post("u.php",{img:canvas.toDataURL()},function(x){var x=eval("("+x+")");"SUCCESS"==x.state?$("#canvas-img").attr("src",x.url):$("#canvas-img").attr("src",canvas.toDataURL("image/png")),$("#canvas-img").on("load",function(){$(".mask").remove(),$(".panel").hide(),$(".panel-test").show(),$("body").css("overflow","auto").css("background-image","")})})})}),$(".panel-test .save").show().on("touchend",function(){$(this).remove()}),$(".panel-info").on("displayPanel",function(){$(".panel").hide(),$(this).show(),$("body").css("overflow","auto").css("background-image",'url("img/back-img.png");')}),$(".panel-init__button-test").on("click",function(){return $(".mask").show(),$(".panel-test").triggerHandler("displayPanel"),!1}),$(".panel-init__button-info").on("click",function(){return $(".panel-info").triggerHandler("displayPanel"),!1}),$(".panel-info__button-back").on("click",function(){return!1})});