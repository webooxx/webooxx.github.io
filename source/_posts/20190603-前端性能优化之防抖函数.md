---
layout: post
title: 前端性能优化之防抖函数
tags:
  - JS
  - 性能优化
originContent: |-
  在搜索场景下，用户一般都是连续的输入要搜索的内容。一般来说需要等待用户输入完成后才开始搜索。

  这种场景可以使用截流函数来处理
categories:
  - js
toc: false
date: 2019-06-03 16:01:23
---

在搜索场景下，用户一般都是连续的输入要搜索的内容。一般来说需要等待用户输入完成后才开始搜索。

这种场景可以使用截流函数来处理



[演示DEMO](./ddemo/debounce/debounce.html)

关键代码

```html
<style type="text/css">
    
    body{
        padding: 40px;
        font-size: 12px;
        line-height: 20px;   
    }

</style>
<input type="text" id="input" size="50" placeholder="请输入内容" />
<div id="log" />
<script>

    // 简单的节流函数
    function debounce(func, wait) {
        let timeout = -1;
        console.log('生成节流函数');
        return function() {
            clearTimeout(timeout);
            timeout = setTimeout(func, wait);
            console.log('延迟执行，执行前，取消上一次的延迟执行 timeId:',timeout)
        };
    }

    //事件处理程序
    function writeLog(){
        console.log('真正的执行，获取输入内容   ',input.value)
        log.innerHTML += new Date().toLocaleString() +'&nbsp;&nbsp;&nbsp;&nbsp;'+ ( (input.value||'') + '<br/>');
    }
    input.onkeydown = debounce(writeLog,1000);

</script>

```