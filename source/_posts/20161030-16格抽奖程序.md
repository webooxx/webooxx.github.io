---
title: 16æ ¼æŠ½å¥–ç¨‹åº
date: 2016-10-30 09:51:21
tags: [jsç‰¹æ•ˆ,å•é¡µåº”ç”¨]
---

æœ‰æ—¶å€™éœ€è¦ä¸ªæŠ½å¥–çš„ç•Œé¢ï¼Œç°åœ¨æŠ½å‡ºæ¥å•ç‹¬åšä¸ªåº”ç”¨ï¼Œå¹´ä¼šä¸ŠæŠ½å¥–å¯ä»¥ç”¨ã€‚

## è¿è¡Œç•Œé¢ï¼š

[é¢„è§ˆåœ°å€](/ddemo/reward-maching.html)

![æ•ˆæœé¢„è§ˆ](/images/2016-10-30 10.18.29.png)


## å…³é”®ä»£ç 


#### ç›’å­è®¾å®š

```` javascript
var size = 5;


var items = [];
var items_top = [];
var items_bottom=[]
var items_right = [];
var items_left = [];

var box = $('.box');  // å®¹å™¨

box.css('width',size*100+'px'); // é»˜è®¤100*100 æ˜¯æ¯ä¸ªæ ¼å­çš„å¤§å°
box.css('height',size*100+'px')


````


#### æ’å…¥ä¸­å¥–æ–¹å—

```` javascript
$.each(Array(size),function (x) {
  $.each(Array(size),function (y) {
      var idx = x*size + y;
      var id = 'i_'+idx;
      box.append('<div class="box__item" data-idx="'+idx+'" id="'+id+'">');

      // æŠŠidåˆ†æˆå››ä¸ªéƒ¨åˆ†
      if( idx > size  && idx%size == size-1 && idx < size*size-size){
        items_right.push(id);
      }
      if( idx > size-1  && idx%size == 0 && idx < size*size-size){
        items_left.push(id);
      }
      if( idx< size){
        items_top.push(id);
      }
      if(idx > size*size-size-1  ){
          items_bottom.push(id);
      }

  });        
});
````

#### è°ƒæ•´idé¡ºåºä¸ºé€†æ—¶é’ˆ

```` javascript
items = items_top.join(',')+','+items_right.join(',')+','+items_bottom.reverse().join(',')+','+items_left.reverse().join(',');
items = items.split(',');

$.each(items,function  (i,id) {
  $('#'+id).text(i+1)
})

````

#### æŠ½å¥–å¼€å§‹

```` javascript

var last = '';  // é‡æ–°å¼€å§‹ä¼šä»ä¸Šä¸€ä¸ªç»“æŸçš„åœ°æ–¹å¼€å§‹
var go = function (num) {

    var end = items.slice(0,num+1).join(',');

    var all = items.join(',');
    var arr = (last+all+','+all+','+all+','+end).split(',');
    var len = arr.length -1;

     last = items.slice(num+1).join(',')+',';

    $.each(arr,function  (i,item) {
      setTimeout(function  () {
        $('.box__item').removeClass('highlight');
        $('#'+item).addClass('highlight');
      },100*i); // è¿™ä¸ªåŠ¨ç”»æ•ˆæœ ~_~!!!

    })
}

go( ~~ (Math.random()*items.length )  )
````
