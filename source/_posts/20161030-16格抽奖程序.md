---
layout: post
title: 16æ ¼æŠ½å¥–ç¨‹åº
tags:
  - jsç‰¹æ•ˆ
  - å•é¡µåº”ç”¨
originContent: "æœ‰æ—¶å€™éœ€è¦ä¸ªæŠ½å¥–çš„ç•Œé¢ï¼Œç°åœ¨æŠ½å‡ºæ¥å•ç‹¬åšä¸ªåº”ç”¨ï¼Œå¹´ä¼šä¸ŠæŠ½å¥–å¯ä»¥ç”¨ã€‚\n\n## è¿è¡Œç•Œé¢ï¼š\n\n[é¢„è§ˆ\båœ°å€](/ddemo/reward-maching.html)\n\n![æ•ˆæœé¢„è§ˆ](/images/2016-10-30 10.18.29.png)\n\n\n## å…³é”®ä»£ç \n\n\n#### ç›’å­è®¾å®š\n\n```` javascript\nvar size = 5;\n\n\nvar items = [];\nvar items_top = [];\nvar items_bottom=[]\nvar items_right = [];\nvar items_left = [];\n\nvar box = $('.box');  // å®¹å™¨\n\nbox.css('width',size*100+'px'); // é»˜è®¤100*100 æ˜¯æ¯ä¸ª\b\b\b\b\eæ ¼å­\bçš„å¤§å°\nbox.css('height',size*100+'px')\n\n\n````\n\n\n#### æ’å…¥ä¸­å¥–æ–¹å—\n\n```` javascript\n$.each(Array(size),function (x) {\n  $.each(Array(size),function (y) {\n      var idx = x*size + y;\n      var id = 'i_'+idx;\n      box.append('<div class=\"box__item\" data-idx=\"'+idx+'\" id=\"'+id+'\">');\n\n      // æŠŠidåˆ†æˆå››ä¸ªéƒ¨åˆ†\n      if( idx > size  && idx%size == size-1 && idx < size*size-size){\n        items_right.push(id);\n      }\n      if( idx > size-1  && idx%size == 0 && idx < size*size-size){\n        items_left.push(id);\n      }\n      if( idx< size){\n        items_top.push(id);\n      }\n      if(idx > size*size-size-1  ){\n          items_bottom.push(id);\n      }\n\n  });        \n});\n````\n\n#### è°ƒæ•´idé¡ºåºä¸ºé€†æ—¶é’ˆ\n\n```` javascript\nitems = items_top.join(',')+','+items_right.join(',')+','+items_bottom.reverse().join(',')+','+items_left.reverse().join(',');\nitems = items.split(',');\n\n$.each(items,function  (i,id) {\n  $('#'+id).text(i+1)\n})\n\n````\n\n#### æŠ½å¥–å¼€å§‹\n\n```` javascript\n\nvar last = '';  // é‡æ–°å¼€å§‹ä¼šä»ä¸Šä¸€ä¸ªç»“æŸçš„åœ°æ–¹å¼€å§‹\nvar go = function (num) {\n\n    var end = items.slice(0,num+1).join(',');\n\n    var all = items.join(',');\n    var arr = (last+all+','+all+','+all+','+end).split(',');\n    var len = arr.length -1;\n\n     last = items.slice(num+1).join(',')+',';\n\n    $.each(arr,function  (i,item) {\n      setTimeout(function  () {\n        $('.box__item').removeClass('highlight');\n        $('#'+item).addClass('highlight');\n      },100*i); // è¿™ä¸ªåŠ¨ç”»æ•ˆæœ ~_~!!!\n\n    })\n}\n\ngo( ~~ (Math.random()*items.length )  )\n````"
categories:
  - æ¸¸æˆ
toc: true
date: 2016-10-30 09:51:21
---

æœ‰æ—¶å€™éœ€è¦ä¸ªæŠ½å¥–çš„ç•Œé¢ï¼Œç°åœ¨æŠ½å‡ºæ¥å•ç‹¬åšä¸ªåº”ç”¨ï¼Œå¹´ä¼šä¸ŠæŠ½å¥–å¯ä»¥ç”¨ã€‚

## è¿è¡Œç•Œé¢ï¼š

[é¢„è§ˆåœ°å€](/ddemo/reward-maching.html)

![æ•ˆæœé¢„è§ˆ](/images/2016-10-30 10.18.29.png)


## å…³é”®ä»£ç 


#### ç›’å­è®¾å®š

```` javascript
var size = 5;


var items = [];
var items_top = [];
var items_bottom=[]
var items_right = [];
var items_left = [];

var box = $('.box');  // å®¹å™¨

box.css('width',size*100+'px'); // é»˜è®¤100*100 æ˜¯æ¯ä¸ªæ ¼å­çš„å¤§å°
box.css('height',size*100+'px')


````


#### æ’å…¥ä¸­å¥–æ–¹å—

```` javascript
$.each(Array(size),function (x) {
  $.each(Array(size),function (y) {
      var idx = x*size + y;
      var id = 'i_'+idx;
      box.append('<div class="box__item" data-idx="'+idx+'" id="'+id+'">');

      // æŠŠidåˆ†æˆå››ä¸ªéƒ¨åˆ†
      if( idx > size  && idx%size == size-1 && idx < size*size-size){
        items_right.push(id);
      }
      if( idx > size-1  && idx%size == 0 && idx < size*size-size){
        items_left.push(id);
      }
      if( idx< size){
        items_top.push(id);
      }
      if(idx > size*size-size-1  ){
          items_bottom.push(id);
      }

  });        
});
````

#### è°ƒæ•´idé¡ºåºä¸ºé€†æ—¶é’ˆ

```` javascript
items = items_top.join(',')+','+items_right.join(',')+','+items_bottom.reverse().join(',')+','+items_left.reverse().join(',');
items = items.split(',');

$.each(items,function  (i,id) {
  $('#'+id).text(i+1)
})

````

#### æŠ½å¥–å¼€å§‹

```` javascript

var last = '';  // é‡æ–°å¼€å§‹ä¼šä»ä¸Šä¸€ä¸ªç»“æŸçš„åœ°æ–¹å¼€å§‹
var go = function (num) {

    var end = items.slice(0,num+1).join(',');

    var all = items.join(',');
    var arr = (last+all+','+all+','+all+','+end).split(',');
    var len = arr.length -1;

     last = items.slice(num+1).join(',')+',';

    $.each(arr,function  (i,item) {
      setTimeout(function  () {
        $('.box__item').removeClass('highlight');
        $('#'+item).addClass('highlight');
      },100*i); // è¿™ä¸ªåŠ¨ç”»æ•ˆæœ ~_~!!!

    })
}

go( ~~ (Math.random()*items.length )  )
````